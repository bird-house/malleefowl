[QC_build]

parts =
    qc_install
    qc_conf

[qc_install]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds =
      /opt/anaconda/bin/python ${buildout:directory}/src/qc-processes/compile_qctool.py /opt/anaconda

[qc_conf]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds = 
     echo \#Configuration file auto-generated by config/QC.cfg.  > ${variables:filename} 
     echo \#Modify the generator file instead of this file to keep changes. >> ${variables:filename}
     echo data_node=\"bmbf-ipcc-ar5.dkrz.de\"  >> ${variables:filename}
     echo index_node=\"esgf-data.dkrz.de\" >> ${variables:filename}
     echo access=\"HTTPServer\" >> ${variables:filename}
     echo metadata_format=\"THREDDS\" >> ${variables:filename}
     echo replica=\"false\" >> ${variables:filename}
     echo latest=\"true\" >> ${variables:filename}
     echo database_location={\"host\": \"localhost\", \"port\": 27017, \"basename\": \"climdaps\"} >> ${variables:filename}
     
     echo work_directory=\"${buildout:directory}/var/qc_cache\" >> ${variables:filename}



[variables]
filename =  ${buildout:directory}/processes/quality_processes.conf
